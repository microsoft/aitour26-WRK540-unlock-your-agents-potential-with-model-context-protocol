## トラブルシューティング

### よくある問題

1. **Dev Tunnelリソースの開始に失敗しました**: `devtunnel login`を実行し、Microsoft Dev Tunnelsでアカウントを認証済みであることを確認してください。
1. **Aspireダッシュボードにリソースが不足している**: [はじめに](./getting-started.md)の手順を完了し、すべてのリソースがAzureにデプロイされていることを確認してください。ターミナルウィンドウを開き、AppHostプロジェクトディレクトリで`dotnet user-secrets list`を実行して、パラメータがユーザーシークレットに追加されていることを確認してください。以下の値を含んでいる必要があります：

   ```
    Parameters:ResourceGroupName = ...
    Parameters:pg-password = ...
    Parameters:mcp-inspector-proxyToken = ...
    Parameters:FoundryResourceName = ...
    Parameters:FoundryProjectName = ...
    Parameters:FoundryEndpoint = ...
    Parameters:EmbeddingModelDeploymentName = ...
    Parameters:ChatModelDeploymentName = ...
    Parameters:AzureOpenAIEndpoint = ...
    ConnectionStrings:ApplicationInsights = ...
    Azure:Tenant = ...
    Azure:SubscriptionId = ...
    Azure:ResourceGroup = ...
    Azure:Location = ...
   ```

1. **デバッガー起動時にdotnetがサポートされていない**: Visual Studio CodeでC#拡張機能をインストールしていることを確認してください。すでにインストールしている場合は、Visual Studio Codeを再起動してみてください。
   ![デバッガーエラー](../media/troubleshooting/dotnet-debugger-not-supported.png)

1. **Aspireダッシュボードが読み込まれない**: ブラウザが読み込まれない場合は、ページをハードリフレッシュ（Ctrl + F5またはCmd + Shift + R）してみてください。それでも読み込まれない場合は、Dev Tunnelを開始したターミナルウィンドウでDev Tunnelが実行されていることを確認してください。実行されていない場合は、AppHostプロジェクトディレクトリに移動し、`dotnet run`を実行して再度開始してください。

1. **デバッガーでブラウザが起動しない**: VS Code Debug ConsoleでURL`http://localhost:15184`を確認してください。Aspireダッシュボードは認証に無作為に生成されたキーを使用し、それがURLに含まれています。URLをコピーしてブラウザに貼り付けて、Aspireダッシュボードにアクセスしてください。ターミナルメッセージは以下のようになります：

   ```
   info: Aspire.Hosting.DistributedApplication[0]
         Now listening on: http://localhost:15184
   Aspire.Hosting.DistributedApplication: Information: Now listening on: http://localhost:15184
   info: Aspire.Hosting.DistributedApplication[0]
         Login to the dashboard at http://localhost:15184/login?t=<token>
   ```

1. **`ai-foundry`リソースが_プロビジョニングに失敗しました_と報告される**: これは、アプリケーションの初回実行でAzure接続の確立に失敗した場合に発生することがあります。Visual Studio Codeでデバッガーを再起動して再度試行してください。
